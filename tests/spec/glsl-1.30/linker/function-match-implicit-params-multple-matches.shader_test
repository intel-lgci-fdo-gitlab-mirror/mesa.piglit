/* Here we test that linking passes if we have more than 1 potential matching
 * function signature that is not an exact match so long as only 1 of those
 * functions can actually result in a non exact match i.e here the function
 * with the uint param is not recognised as a match due to the glsl version.
 *
 * From page 42 (page 49 of the PDF) of the GLSL 1.20 spec:
 *
 * "If an exact match is found, the other signatures are ignored, and
 *  the exact match is used.  Otherwise, if no exact match is found, then
 *  the implicit conversions in Section 4.1.10 "Implicit Conversions" will
 *  be applied to the calling arguments if this can make their types match
 *  a signature.  In this case, it is a semantic error if there are
 *  multiple ways to apply these conversions to the actual arguments of a
 *  call such that the call can be made to match multiple signatures."
 *
 * However unextended glsl 1.30 does not allow implicit int to unit conversions
 * so the function with the uint param should not be seen as a match.
 */

[require]
GLSL >= 1.30

[vertex shader]
#version 130

vec4 my_position(vec4 a)
{
   return a * 0.5;
}

vec4 my_position(uvec4 a)
{
   return vec4(a * 2u);
}

[vertex shader]
#version 120

vec4 my_position(ivec4 a);

void main()
{
  gl_Position = my_position(ivec4(1.0));
}


[fragment shader]
#version 120
void main()
{
  gl_FragColor = vec4(1.0);
}


[test]
link success
